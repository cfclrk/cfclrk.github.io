#+TITLE: XML

Some notes about working with XML in emacs.

* Emacs hanging

  Is Emacs hanging when you make changes to XML files?

* Formatting

  There's a built-in function, =sgml-pretty-print=, but it's pretty slow.
  Running xmlstarlet on the same file is instantaneous.

  Install xmlstarlet:

  #+begin_src sh
    brew install xmlstarlet
  #+end_src

  Navigate to the file in a dired buffer, and hit =!= (=dired-do-shell-command=)
  to run a shell command on the file. Type: =xmlstarlet ed --inplace=.

  Or, define the following interactive function:

  #+begin_src emacs-lisp
    (defun my/xml-format-buffer ()
      "Format an XML file using xmlstarlet."
      (interactive)
      (let ((file (buffer-file-name)))
        (call-process "xmlstarlet"
                      file nil nil
                      "ed" "--inplace" file)))
  #+end_src
