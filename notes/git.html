<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Personal Git Notes</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/static/main.css" />
</head>
<body>
<div id="preamble" class="status">
<nav id="navbar" class="cf">
  <ul class="cf">
    <li class="fl">
      <a href="/">cfclrk</a>
    </li>
    <li class="fr">
      <a href="/articles/home.html">Articles</a>
    </li>
    <li class="fr">
      <a href="/notes/home.html">Notes</a>
    </li>
	<li class="fr">
      <a href="/cloudformation/home.html">CloudFormation</a>
    </li>
  </ul>
</nav>
</div>
<div id="content" class="content">
<header>
<h1 class="title">Personal Git Notes</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org3978327">Accidental</a>
<ul>
<li><a href="#org5f4592a">Commit to Wrong Branch</a></li>
<li><a href="#org9237b2d">Rebase</a></li>
<li><a href="#org8703b54">Made an Ammend Commit</a></li>
<li><a href="#org813f76b">Committed Locally Before Pulling Remote</a></li>
</ul>
</li>
<li><a href="#orgebeba5e">Fixup</a></li>
<li><a href="#org1ba968b">First Commit</a></li>
<li><a href="#org9fd671f">Tags</a>
<ul>
<li><a href="#org63113a8">Get Project Version From Tag</a></li>
<li><a href="#orgaeaaf14">Is HEAD a tag?</a></li>
</ul>
</li>
<li><a href="#org94c3d2b">Project Root Dir</a></li>
<li><a href="#orgfd3510c">What is this?</a></li>
<li><a href="#orgd76a017">Cool Resources</a>
<ul>
<li><a href="#org91402e5">git-quick-stats</a></li>
</ul>
</li>
</ul>
</div>
</nav>

<div id="outline-container-org3978327" class="outline-2">
<h2 id="org3978327"><a href="#org3978327">Accidental</a></h2>
<div class="outline-text-2" id="text-org3978327">
</div>
<div id="outline-container-org5f4592a" class="outline-3">
<h3 id="org5f4592a"><a href="#org5f4592a">Commit to Wrong Branch</a></h3>
<div class="outline-text-3" id="text-org5f4592a">
<p>
You committed to main instead of develop, but haven't pushed changes yet.
</p>

<ul class="org-ul">
<li>Soft-reset main back to origin/develop</li>
<li>The committed changes will now be staged</li>
<li>Switch to develop branch</li>
<li>Commit staged changes</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">git reset --soft origin/develop
</pre>
</div>
</div>
</div>

<div id="outline-container-org9237b2d" class="outline-3">
<h3 id="org9237b2d"><a href="#org9237b2d">Rebase</a></h3>
<div class="outline-text-3" id="text-org9237b2d">
<p>
You rebased, and then remembered that the branch you were on has already been
pushed to a remote repo. You shouldn't push this rebase!
</p>

<ul class="org-ul">
<li>You need to return the current branch to where it was before the rebase.</li>
</ul>
</div>
</div>

<div id="outline-container-org8703b54" class="outline-3">
<h3 id="org8703b54"><a href="#org8703b54">Made an Ammend Commit</a></h3>
<div class="outline-text-3" id="text-org8703b54">
<p>
You ran a <code>git commit --ammend</code>, and then realized you've actually already
pushed that commit you were ammending. You can't push the ammended commit!
</p>

<ul class="org-ul">
<li>Reset soft to <code>origin/branch-name</code>. Then the changes you just committed
will be staged. Now you can commit again as a new commit.</li>
</ul>
</div>
</div>

<div id="outline-container-org813f76b" class="outline-3">
<h3 id="org813f76b"><a href="#org813f76b">Committed Locally Before Pulling Remote</a></h3>
<div class="outline-text-3" id="text-org813f76b">
<p>
Somebody pushed changes to your branch while you were still committing
locally. Now your branch and the remote branch have diverged.
</p>

<ul class="org-ul">
<li>Option 1: Merge remote into local. Just do a git merge of
remote/branch-name.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgebeba5e" class="outline-2">
<h2 id="orgebeba5e"><a href="#orgebeba5e">Fixup</a></h2>
<div class="outline-text-2" id="text-orgebeba5e">
<p>
You make a change that ought to have been part of a previous commit, but that
previous commit is not the last commit (so you can't just <code>--amend</code> the last
commit).
</p>

<p>
First, make the commit and mark it as a <code>fixup</code> for the offending commit:
</p>

<div class="org-src-container">
<pre class="src src-sh">git commit --fixup fb2f677
</pre>
</div>

<p>
Next, run a <code>rebase --squash</code>, which does a rebase where fixup commits are
squashed into the commits that they fix up. The commit hash is the commit where
the rebase is started from.
</p>

<div class="org-src-container">
<pre class="src src-sh">git rebase -i --squash ac5db87
</pre>
</div>
</div>
</div>

<div id="outline-container-org1ba968b" class="outline-2">
<h2 id="org1ba968b"><a href="#org1ba968b">First Commit</a></h2>
<div class="outline-text-2" id="text-org1ba968b">
<p>
Some ways to find the first commit in a Git repository:
</p>

<div class="org-src-container">
<pre class="src src-sh">git show $(git rev-list --max-parents=0 HEAD)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh">git log --reverse
</pre>
</div>
</div>
</div>

<div id="outline-container-org9fd671f" class="outline-2">
<h2 id="org9fd671f"><a href="#org9fd671f">Tags</a></h2>
<div class="outline-text-2" id="text-org9fd671f">
</div>
<div id="outline-container-org63113a8" class="outline-3">
<h3 id="org63113a8"><a href="#org63113a8">Get Project Version From Tag</a></h3>
<div class="outline-text-3" id="text-org63113a8">
<p>
I got this from cider:
<a href="https://github.com/clojure-emacs/cider/blob/18bb5e12bfff4196de4102b5abce226dcd7d4b9a/Makefile#L4">https://github.com/clojure-emacs/cider/blob/18bb5e12bfff4196de4102b5abce226dcd7d4b9a/Makefile#L4</a>
</p>

<div class="org-src-container">
<pre class="src src-sh">git describe --tags --abbrev=0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaeaaf14" class="outline-3">
<h3 id="orgaeaaf14"><a href="#orgaeaaf14">Is HEAD a tag?</a></h3>
<div class="outline-text-3" id="text-orgaeaaf14">
<p>
If HEAD is a tag, this will print the tag name. If not, it prints nothing.
</p>

<div class="org-src-container">
<pre class="src src-sh">git tag --points-at HEAD
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org94c3d2b" class="outline-2">
<h2 id="org94c3d2b"><a href="#org94c3d2b">Project Root Dir</a></h2>
<div class="outline-text-2" id="text-org94c3d2b">
<div class="org-src-container">
<pre class="src src-sh">git rev-parse --show-toplevel
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfd3510c" class="outline-2">
<h2 id="orgfd3510c"><a href="#orgfd3510c">What is this?</a></h2>
<div class="outline-text-2" id="text-orgfd3510c">
<p>
commit=$(git rev-parse HEAD)
git name-rev &#x2013;no-undefined &#x2013;name-only $commit
</p>
</div>
</div>

<div id="outline-container-orgd76a017" class="outline-2">
<h2 id="orgd76a017"><a href="#orgd76a017">Cool Resources</a></h2>
<div class="outline-text-2" id="text-orgd76a017">
</div>
<div id="outline-container-org91402e5" class="outline-3">
<h3 id="org91402e5"><a href="#org91402e5">git-quick-stats</a></h3>
<div class="outline-text-3" id="text-org91402e5">
<p>
Bash script that shows cool stats of git repos. Has some good stuff.
<a href="https://github.com/arzzen/git-quick-stats/blob/master/git-quick-stats">https://github.com/arzzen/git-quick-stats/blob/master/git-quick-stats</a>
</p>
</div>
</div>
</div>
</div>
</body>
</html>
