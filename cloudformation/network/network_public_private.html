<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Network with Public and Private Subnets </title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/static/main.css" />
</head>
<body>
<div id="preamble" class="status">
<nav id="navbar" class="cf">
  <ul class="cf">
    <li class="fl">
      <a href="/">cfclrk</a>
    </li>
    <li class="fr">
      <a href="/articles/home.html">Articles</a>
    </li>
    <li class="fr">
      <a href="/notes/home.html">Notes</a>
    </li>
	<li class="fr">
      <a href="/cloudformation/home.html">CloudFormation</a>
    </li>
  </ul>
</nav>
</div>
<div id="content">
<header>
<h1 class="title">Network with Public and Private Subnets </h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org135886c">Overview</a></li>
<li><a href="#org0880ac6">Parameters</a>
<ul>
<li><a href="#org47c71bf">DeploymentName</a></li>
</ul>
</li>
<li><a href="#org1ed2939">Resources</a>
<ul>
<li><a href="#org957c5bc">VPC</a></li>
<li><a href="#orgbd8fb6f">Internet Gateway</a></li>
<li><a href="#org9f525e0">Public Route Table</a></li>
<li><a href="#org7557486">Private Route Tables</a></li>
<li><a href="#orgbda7bbd">Public Subnets</a></li>
<li><a href="#orga9248b4">Private Subnets</a></li>
<li><a href="#org609677d">NAT Gateways</a></li>
</ul>
</li>
<li><a href="#org84d1e10">Outputs</a></li>
</ul>
</div>
</nav>

<div id="outline-container-org135886c" class="outline-2">
<h2 id="org135886c"><a href="#org135886c">Overview</a></h2>
<div class="outline-text-2" id="text-org135886c">
<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #dcaeea;">AWSTemplateFormatVersion</span>: 2010-09-09
<span style="color: #dcaeea;">Description</span>: &gt;
  <span style="color: #98be65;">VPC with two public Subnets and two private Subnets. Each public Subnet</span>
<span style="color: #98be65;">  includes a NAT Gateway, which allows outbound traffic from the private</span>
<span style="color: #98be65;">  Subnets.</span>
</pre>
</div>

<p>
This document creates a "standard" AWS network. AWS documents this
architecture <a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Scenario2.html">here</a>. This is the go-to VPC structure, and is usually considered
the starting place for any AWS network design. For example, when using the AWS
CDK, this is the infrastrucure that is created when you use the <a href="https://docs.aws.amazon.com/cdk/api/latest/docs/@aws-cdk_aws-ec2.Vpc.html">VPC construct</a>
with its default options.
</p>


<figure id="org04cb840">
<img src="../../static/img/Network-Public-Private.png" alt="Network-Public-Private.png">

</figure>
</div>
</div>

<div id="outline-container-org0880ac6" class="outline-2">
<h2 id="org0880ac6"><a href="#org0880ac6">Parameters</a></h2>
<div class="outline-text-2" id="text-org0880ac6">
<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #dcaeea;">Parameters</span>:
</pre>
</div>
</div>

<div id="outline-container-org47c71bf" class="outline-3">
<h3 id="org47c71bf"><a href="#org47c71bf">DeploymentName</a></h3>
<div class="outline-text-3" id="text-org47c71bf">
<p>
A <b>deployment</b> is a complete deployed application, potentially comprised of many
CloudFormation stacks. This is sometimes called an "environment", but that is an
overloaded term. Use the <code>DeploymentName</code> to indicate which deployment a Stack
is part of.
</p>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">DeploymentName</span>:
    <span style="color: #dcaeea;">Description</span>: A name for this deployment
    <span style="color: #dcaeea;">Type</span>: String
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">VpcCIDR</span>:
    <span style="color: #dcaeea;">Description</span>: CIDR range for this VPC
    <span style="color: #dcaeea;">Type</span>: String
    <span style="color: #dcaeea;">Default</span>: 10.192.0.0/16

  <span style="color: #dcaeea;">PublicSubnet1CIDR</span>:
    <span style="color: #dcaeea;">Description</span>: CIDR range for public subnet in 1st AZ
    <span style="color: #dcaeea;">Type</span>: String
    <span style="color: #dcaeea;">Default</span>: 10.192.10.0/24

  <span style="color: #dcaeea;">PublicSubnet2CIDR</span>:
    <span style="color: #dcaeea;">Description</span>: CIDR range for public subnet in 2nd AZ
    <span style="color: #dcaeea;">Type</span>: String
    <span style="color: #dcaeea;">Default</span>: 10.192.11.0/24

  <span style="color: #dcaeea;">PrivateSubnet1CIDR</span>:
    <span style="color: #dcaeea;">Description</span>: CIDR range for private subnet in 1st AZ
    <span style="color: #dcaeea;">Type</span>: String
    <span style="color: #dcaeea;">Default</span>: 10.192.20.0/24

  <span style="color: #dcaeea;">PrivateSubnet2CIDR</span>:
    <span style="color: #dcaeea;">Description</span>: CIDR range for private subnet in 2nd AZ
    <span style="color: #dcaeea;">Type</span>: String
    <span style="color: #dcaeea;">Default</span>: 10.192.21.0/24
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org1ed2939" class="outline-2">
<h2 id="org1ed2939"><a href="#org1ed2939">Resources</a></h2>
<div class="outline-text-2" id="text-org1ed2939">
<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #dcaeea;">Resources</span>:
</pre>
</div>
</div>

<div id="outline-container-org957c5bc" class="outline-3">
<h3 id="org957c5bc"><a href="#org957c5bc">VPC</a></h3>
<div class="outline-text-3" id="text-org957c5bc">
<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">VPC</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::VPC
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">CidrBlock</span>: <span style="color: #ECBE7B;">!Ref</span> VpcCIDR
      <span style="color: #dcaeea;">EnableDnsSupport</span>: <span style="color: #a9a1e1;">true</span>
      <span style="color: #dcaeea;">EnableDnsHostnames</span>: <span style="color: #a9a1e1;">true</span>
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbd8fb6f" class="outline-3">
<h3 id="orgbd8fb6f"><a href="#orgbd8fb6f">Internet Gateway</a></h3>
<div class="outline-text-3" id="text-orgbd8fb6f">
<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">InternetGateway</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::InternetGateway
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}"</span>

  <span style="color: #dcaeea;">InternetGatewayAttachment</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::VPCGatewayAttachment
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">InternetGatewayId</span>: <span style="color: #ECBE7B;">!Ref</span> InternetGateway
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
</pre>
</div>
</div>
</div>

<div id="outline-container-org9f525e0" class="outline-3">
<h3 id="org9f525e0"><a href="#org9f525e0">Public Route Table</a></h3>
<div class="outline-text-3" id="text-org9f525e0">
<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PublicRouteTable</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::RouteTable
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName} Public"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PublicRoute</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::Route
    <span style="color: #dcaeea;">DependsOn</span>: InternetGatewayAttachment
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">RouteTableId</span>: <span style="color: #ECBE7B;">!Ref</span> PublicRouteTable
      <span style="color: #dcaeea;">DestinationCidrBlock</span>: 0.0.0.0/0
      <span style="color: #dcaeea;">GatewayId</span>: <span style="color: #ECBE7B;">!Ref</span> InternetGateway
</pre>
</div>
</div>
</div>

<div id="outline-container-org7557486" class="outline-3">
<h3 id="org7557486"><a href="#org7557486">Private Route Tables</a></h3>
<div class="outline-text-3" id="text-org7557486">
<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PrivateRouteTable1</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::RouteTable
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName} Private (AZ1)"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PrivateRouteTable2</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::RouteTable
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName} Private (AZ1)"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbda7bbd" class="outline-3">
<h3 id="orgbda7bbd"><a href="#orgbda7bbd">Public Subnets</a></h3>
<div class="outline-text-3" id="text-orgbda7bbd">
<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PublicSubnet1</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::Subnet
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
      <span style="color: #dcaeea;">AvailabilityZone</span>: <span style="color: #ECBE7B;">!Select</span> [0, <span style="color: #ECBE7B;">!GetAZs</span> <span style="color: #98be65;">""</span>]
      <span style="color: #dcaeea;">CidrBlock</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet1CIDR
      <span style="color: #dcaeea;">MapPublicIpOnLaunch</span>: <span style="color: #a9a1e1;">true</span>
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName} Public (AZ1)"</span>

  <span style="color: #dcaeea;">PublicSubnet1RouteTableAssociation</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::SubnetRouteTableAssociation
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">RouteTableId</span>: <span style="color: #ECBE7B;">!Ref</span> PublicRouteTable
      <span style="color: #dcaeea;">SubnetId</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet1
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PublicSubnet2</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::Subnet
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
      <span style="color: #dcaeea;">AvailabilityZone</span>: <span style="color: #ECBE7B;">!Select</span> [1, <span style="color: #ECBE7B;">!GetAZs</span>  <span style="color: #98be65;">""</span>]
      <span style="color: #dcaeea;">CidrBlock</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet2CIDR
      <span style="color: #dcaeea;">MapPublicIpOnLaunch</span>: <span style="color: #a9a1e1;">true</span>
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName} Public (AZ2)"</span>

  <span style="color: #dcaeea;">PublicSubnet2RouteTableAssociation</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::SubnetRouteTableAssociation
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">RouteTableId</span>: <span style="color: #ECBE7B;">!Ref</span> PublicRouteTable
      <span style="color: #dcaeea;">SubnetId</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet2
</pre>
</div>
</div>
</div>

<div id="outline-container-orga9248b4" class="outline-3">
<h3 id="orga9248b4"><a href="#orga9248b4">Private Subnets</a></h3>
<div class="outline-text-3" id="text-orga9248b4">
<p>
There are two differences between "public" and "private" Subnets:
</p>

<ol class="org-ol">
<li>Public Subnets must specify <code>MapPublicIpOnLaunch: true</code>, which tells AWS
to assign public IP addresses to instances.</li>
<li>Public Subnets have a <b>route to an Internet Gateway</b>.</li>
</ol>

<p>
The second item isn't actually a quality of the Subnet itself; rather it's a
matter of what routes are in the Route Table that the Subnet is associated
with.
</p>

<p>
Private Subnets <i>can</i> specify <code>MapPublicIpOnLaunch: true</code> in order to assign
internet-valid IP addresses to instances. That could be useful if, say, you
want to be able to make a Subnet to temporarily public (by adding a route to
the Internet Gateway).
</p>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PrivateSubnet1</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::Subnet
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
      <span style="color: #dcaeea;">AvailabilityZone</span>: <span style="color: #ECBE7B;">!Select</span> [0, <span style="color: #ECBE7B;">!GetAZs</span>  <span style="color: #98be65;">""</span>]
      <span style="color: #dcaeea;">CidrBlock</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateSubnet1CIDR
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName} Private (AZ1)"</span>

  <span style="color: #dcaeea;">PrivateSubnet1RouteTableAssociation</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::SubnetRouteTableAssociation
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">RouteTableId</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateRouteTable1
      <span style="color: #dcaeea;">SubnetId</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateSubnet1
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PrivateSubnet2</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::Subnet
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
      <span style="color: #dcaeea;">AvailabilityZone</span>: <span style="color: #ECBE7B;">!Select</span> [1, <span style="color: #ECBE7B;">!GetAZs</span>  <span style="color: #98be65;">""</span>]
      <span style="color: #dcaeea;">CidrBlock</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateSubnet2CIDR
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName} Private (AZ1)"</span>

  <span style="color: #dcaeea;">PrivateSubnet2RouteTableAssociation</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::SubnetRouteTableAssociation
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">RouteTableId</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateRouteTable2
      <span style="color: #dcaeea;">SubnetId</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateSubnet2
</pre>
</div>
</div>
</div>

<div id="outline-container-org609677d" class="outline-3">
<h3 id="org609677d"><a href="#org609677d">NAT Gateways</a></h3>
<div class="outline-text-3" id="text-org609677d">
<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">NatGateway1EIP</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::EIP
    <span style="color: #dcaeea;">DependsOn</span>: InternetGatewayAttachment
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">Domain</span>: vpc

  <span style="color: #dcaeea;">NatGateway1</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::NatGateway
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">AllocationId</span>: <span style="color: #ECBE7B;">!GetAtt</span> NatGateway1EIP.AllocationId
      <span style="color: #dcaeea;">SubnetId</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet1
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">NatGateway2EIP</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::EIP
    <span style="color: #dcaeea;">DependsOn</span>: InternetGatewayAttachment
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">Domain</span>: vpc

  <span style="color: #dcaeea;">NatGateway2</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::NatGateway
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">AllocationId</span>: <span style="color: #ECBE7B;">!GetAtt</span> NatGateway2EIP.AllocationId
      <span style="color: #dcaeea;">SubnetId</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet2
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org84d1e10" class="outline-2">
<h2 id="org84d1e10"><a href="#org84d1e10">Outputs</a></h2>
<div class="outline-text-2" id="text-org84d1e10">
<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #dcaeea;">Outputs</span>:
  <span style="color: #dcaeea;">VpcId</span>:
    <span style="color: #dcaeea;">Description</span>: A reference to the created VPC
    <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
    <span style="color: #dcaeea;">Export</span>:
      <span style="color: #dcaeea;">Name</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}-VpcId"</span>

  <span style="color: #dcaeea;">VpcCidr</span>:
    <span style="color: #dcaeea;">Description</span>: The VPC CIDR range
    <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!GetAtt</span> VPC.CidrBlock
    <span style="color: #dcaeea;">Export</span>:
      <span style="color: #dcaeea;">Name</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}-VpcCidr"</span>

  <span style="color: #dcaeea;">PublicSubnet1</span>:
    <span style="color: #dcaeea;">Description</span>: The public subnet in the 1st AZ
    <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet1
    <span style="color: #dcaeea;">Export</span>:
      <span style="color: #dcaeea;">Name</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}-PublicSubnet1"</span>

  <span style="color: #dcaeea;">PublicSubnet2</span>:
    <span style="color: #dcaeea;">Description</span>: The public subnet in the 2nd AZ
    <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet2
    <span style="color: #dcaeea;">Export</span>:
      <span style="color: #dcaeea;">Name</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}-PublicSubnet2"</span>

  <span style="color: #dcaeea;">PrivateSubnet1</span>:
    <span style="color: #dcaeea;">Description</span>: The private subnet in the 1st AZ
    <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateSubnet1
    <span style="color: #dcaeea;">Export</span>:
      <span style="color: #dcaeea;">Name</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}-PrivateSubnet1"</span>

  <span style="color: #dcaeea;">PrivateSubnet2</span>:
    <span style="color: #dcaeea;">Description</span>: The private subnet in the 2nd AZ
    <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateSubnet2
    <span style="color: #dcaeea;">Export</span>:
      <span style="color: #dcaeea;">Name</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}-PrivateSubnet2"</span>
</pre>
</div>
</div>
</div>
</div>
</body>
</html>
